# URL Builder

## Basic Usage

The minimum requirements are as follows:

* Prepare a class with the `#!csharp [BlazorPath]` attribute. This class definition must also include the `#!csharp partial` attribute.
* Define constants of type `#!csharp const string` as members within that class.

BlazorPathHelper will automatically search for class definitions that meet the above criteria and generate URL builder functions.

```csharp title="WebPaths.cs"
[BlazorPath]
public partial class WebPaths
{
  public const string CounterWithState = "/counter/{count:int}";
}
```

??? abstract "Generated Code"

    ```csharp title="Auto Generated Code"
    // <auto-generated />
    public partial class WebPaths
    {
      public partial class Helper
      {
        public static string CounterWithState(int Count)
          => string.Format("/counter/{0}", ToStringForUrl(Count));
      }
    }
    ```

## Supporting `PathBase` Specification

When deploying under a subdirectory, you can configure the generated URLs to consider the `PathBase` by setting it as follows:

```csharp title="WebPaths.cs"
[BlazorPath(PathBaseValue = PathBase)]
public partial class WebPaths
{
  [Item(Ignore = true)]
  private const string PathBase = "/subdir";
  // ...
}
```

The value specified here is directly passed to both [`<base href>`](https://github.com/arika0093/BlazorPathHelper/blob/main/examples/Example.ServerPathBase/Components/App.razor#L7) and [`app.UsePathBase()`](https://github.com/arika0093/BlazorPathHelper/blob/main/examples/Example.ServerPathBase/Program.cs#L13).

```razor title="App.razor"
<base href="@WebPaths.PathBase" />
```

```csharp title="Program.cs"
app.UsePathBase(WebPaths.PathBase);
```

For more details, refer to [Example.ServerPathBase](https://github.com/arika0093/BlazorPathHelper/tree/main/examples/Example.ServerPathBase).


## URL Definition Examples

All URL definitions listed in the [official documentation](https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/routing?view=aspnetcore-9.0#route-constraints) are supported. You can also refer to the [test cases](https://github.com/arika0093/BlazorPathHelper/blob/main/tests/BlazorPathHelper.Tests/PathTestWithArgs.cs) for this program.

### Standard Examples

| Definition Example                      | Generated Function                              | Example Output URL                                      |
| --------------------------------------- | ----------------------------------------------- | ------------------------------------------------------- |
| `#!csharp "/{text}"`                    | `#!csharp string Text(string text)`             | `#!csharp "/sample-text"`                               |
| `#!csharp "/{active:bool}"`             | `#!csharp string Active(bool active)`           | `#!csharp "/true"`                                      |
| `#!csharp "/{dob:datetime}"`            | `#!csharp string Dob(DateTime dob)`             | `#!csharp "/2025-01-01T00:00:00Z"` ※1                   |
| `#!csharp "/{price:decimal}"`           | `#!csharp string Price(decimal price)`          | `#!csharp "/123.45"`                                    |
| `#!csharp "/{weight:double}"`           | `#!csharp string Weight(double weight)`         | `#!csharp "/123.45"`                                    |
| `#!csharp "/{weight:float}"`            | `#!csharp string Weight(float weight)`          | `#!csharp "/123.45"`                                    |
| `#!csharp "/{id:guid}"`                 | `#!csharp string Id(Guid id)`                   | `#!csharp "/00001111-aaaa-2222-bbbb-3333cccc4444"`      |
| `#!csharp "/{id:int}"`                  | `#!csharp string Id(int id)`                    | `#!csharp "/123456789"`                                 |
| `#!csharp "/{ticks:long}"`              | `#!csharp string Ticks(long ticks)`             | `#!csharp "/123456789"`                                 |
| `#!csharp "/{parameter:nonfile}"`       | `#!csharp string Parameter(string parameter)`   | `#!csharp "/foo"`                                       |
| `#!csharp "/{*pageRoute}"`              | `#!csharp string PageRoute(string pageRoute)`   | `#!csharp "/foo/bar/buz"`                               |

※1: The output is converted to ISO 8601 format and UTC format.

### Optional Parameter Examples

| Definition Example                      | Generated Function                                  | Example Output URL                      |
| --------------------------------------- | --------------------------------------------------- | --------------------------------------- |
| `#!csharp "/{text?}"`                   | `#!csharp string Text(string? text = null)`         | `#!csharp "/sample-text-2", "/"`        |
| `#!csharp "/{active:bool?}"`            | `#!csharp string Active(bool? active = null)`       | `#!csharp "/true", "/"`                 |

### Combined Examples

| Definition Example                      | Generated Function                                      | Example Output URL                      |
| --------------------------------------- | ------------------------------------------------------- | --------------------------------------- |
| `#!csharp "/{text}/{val:int}"`          | `#!csharp string TextValue(string text, int val)`       | `#!csharp "/sample/123"`                |
| `#!csharp "/{id:int}/{flag:bool?}"`     | `#!csharp string IdFlag(int id, bool? flag = null)`     | `#!csharp "/123/true", "/456/"`         |

## Various Definition Methods

```csharp title="WebPaths.cs"
using BlazorPathHelper;

[BlazorPath]
public partial class WebPaths
{
  // string
  public const string WithString = "/string/{val}";
  // nullable string
  public const string WithStringNullable = "/string-null/{val?}";
  // bool
  public const string WithBool = "/bool/{val:bool}";
  // datetime
  public const string WithDate = "/datetime/{val:datetime}";
  // decimal
  public const string WithDecimal = "/decimal/{val:decimal}";
  // double
  public const string WithDouble = "/double/{val:double}";
  // float
  public const string WithFloat = "/float/{val:float}";
  // guid
  public const string WithGuid = "/guid/{val:guid}";
  // int
  public const string WithInt = "/int/{val:int}";
  // long
  public const string WithLong = "/long/{val:long}";
  // multiple pattern
  public const string WithMultiple = "/multi/{val1:int}/{val2:int}";
  // super multiple pattern
  public const string WithSuperMultiple = "/something/{val1:string}/{val2:int}/{val3:double?}";
  // catch all pattern
  public const string WithCatchAll = "/catch-all/{*rest}";
}
```