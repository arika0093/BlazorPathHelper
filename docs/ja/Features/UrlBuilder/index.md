## 最小限の使用方法

最小限必要なものは以下の内容です。

* `#!csharp [BlazorPath]`属性を付与したクラスを用意します。この際、クラス定義には`#!csharp partial`属性が必要です。
* そのクラス内のメンバーとして`#!csharp const string`型の定数を定義します。

BlazorPathHelperは上記の内容を満たすクラス定義を自動で捜査して、URLビルダー関数を生成します。


```csharp title="WebPaths.cs"
[BlazorPath]
public partial class WebPaths
{
  public const string CounterWithState = "/counter/{count:int}";
}
```

??? abstract "生成されたコード"

    ```csharp title="Auto Generated Code"
    // <auto-generated />
    public partial class WebPaths
    {
      public partial class Helper
      {
        public static string CounterWithState(int Count)
          => string.Format("/counter/{0}", ToStringForUrl(Count));
      }
    }
    ```

## `PathBase`の指定に対応する
サブディレクトリ以下に展開を行う場合、生成されるURLがPathBaseを考慮できるよう以下のように設定します。

```csharp title="WebPaths.cs"
[BlazorPath(PathBaseValue = PathBase)]
public partial class WebPaths
{
    [Item(Ignore = true)]
    private const string PathBase = "/subdir";
    // ...
}
```

ここで指定した値をそのまま[`<base href>`](https://github.com/arika0093/BlazorPathHelper/blob/main/examples/Example.ServerPathBase/Components/App.razor#L7)および[`app.UsePathBase()`](https://github.com/arika0093/BlazorPathHelper/blob/main/examples/Example.ServerPathBase/Program.cs#L13)に渡します。

```razor title="App.razor"
<base href="@WebPaths.PathBase" />
```

```csharp title="Program.cs"
app.UsePathBase(WebPaths.PathBase);
```

詳細は[Example.ServerPathBase](https://github.com/arika0093/BlazorPathHelper/tree/main/examples/Example.ServerPathBase)を参照してください。

## URL定義の凡例
[公式ドキュメント](https://learn.microsoft.com/ja-jp/aspnet/core/blazor/fundamentals/routing?view=aspnetcore-9.0#route-constraints)に記載されているURL定義は全て対応しています。
このプログラムの[テストケース](https://github.com/arika0093/BlazorPathHelper/blob/main/tests/BlazorPathHelper.Tests/PathTestWithArgs.cs)も参照してください。

### 通常の例

| 定義例                               | 生成される関数                                       | 出力されるURLの例                                         |
| --------------------------------- | --------------------------------------------- | -------------------------------------------------- |
| `#!csharp "/{text}"`              | `#!csharp string Text(string text)`           | `#!csharp "/sample-text"`                          |
| `#!csharp "/{active:bool}"`       | `#!csharp string Active(bool active)`         | `#!csharp "/true"`                                 |
| `#!csharp "/{dob:datetime}"`      | `#!csharp string Dob(DateTime dob)`           | `#!csharp "/2025-01-01T00:00:00Z"` ※1             |
| `#!csharp "/{price:decimal}"`     | `#!csharp string Price(decimal price)`        | `#!csharp "/123.45"`                               |
| `#!csharp "/{weight:double}"`     | `#!csharp string Weight(double weight)`       | `#!csharp "/123.45"`                               |
| `#!csharp "/{weight:float}"`      | `#!csharp string Weight(float weight)`        | `#!csharp "/123.45"`                               |
| `#!csharp "/{id:guid}"`           | `#!csharp string Id(Guid id)`                 | `#!csharp "/00001111-aaaa-2222-bbbb-3333cccc4444"` |
| `#!csharp "/{id:int}"`            | `#!csharp string Id(int id)`                  | `#!csharp "/123456789"`                            |
| `#!csharp "/{ticks:long}"`        | `#!csharp string Ticks(long ticks)`           | `#!csharp "/123456789"`                            |
| `#!csharp "/{parameter:nonfile}"` | `#!csharp string Parameter(string parameter)` | `#!csharp "/foo"`                                  |
| `#!csharp "/{*pageRoute}"`        | `#!csharp string PageRoute(string pageRoute)` | `#!csharp "/foo/bar/buz"`                          |

※1: ISO 8601形式かつUTC形式に変換されて出力されます。

### オプションパラメータの例

| 定義例                          | 生成される関数                                       | 出力されるURLの例                       |
| ---------------------------- | --------------------------------------------- | -------------------------------- |
| `#!csharp "/{text?}"`        | `#!csharp string Text(string? text = null)`   | `#!csharp "/sample-text-2", "/"` |
| `#!csharp "/{active:bool?}"` | `#!csharp string Active(bool? active = null)` | `#!csharp "/true", "/"`          |


### 複数を組み合わせた例

| 定義例                                 | 生成される関数                                             | 出力されるURLの例                      |
| ----------------------------------- | --------------------------------------------------- | ------------------------------- |
| `#!csharp "/{text}/{val:int}"`      | `#!csharp string TextValue(string text, int val)`   | `#!csharp "/sample/123"`        |
| `#!csharp "/{id:int}/{flag:bool?}"` | `#!csharp string IdFlag(int id, bool? flag = null)` | `#!csharp "/123/true", "/456/"` |


## 様々な定義方法

```csharp title="WebPaths.cs"
using BlazorPathHelper;

[BlazorPath]
public partial class WebPaths
{
  // string
  public const string WithString = "/string/{val}";
  // nullable string
  public const string WithStringNullable = "/string-null/{val?}";
  // bool
  public const string WithBool = "/bool/{val:bool}";
  // datetime
  public const string WithDate = "/datetime/{val:datetime}";
  // decimal
  public const string WithDecimal = "/decimal/{val:decimal}";
  // double
  public const string WithDouble = "/double/{val:double}";
  // float
  public const string WithFloat = "/float/{val:float}";
  // guid
  public const string WithGuid = "/guid/{val:guid}";
  // int
  public const string WithInt = "/int/{val:int}";
  // long
  public const string WithLong = "/long/{val:long}";
  // multiple pattern
  public const string WithMultiple = "/multi/{val1:int}/{val2:int}";
  // super multiple pattern
  public const string WithSuperMultiple = "/something/{val1:string}/{val2:int}/{val3:double?}";
  // catch all pattern
  public const string WithCatchAll = "/catch-all/{*rest}";
}
```
